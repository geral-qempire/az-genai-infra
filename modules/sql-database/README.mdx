---
title: 'README'
description: 'Quick overview of module usage, inputs, outputs and requirements.'
icon: 'circle-info'
---

## 1. Module
Terraform module to create an Azure SQL Database on an existing SQL Server, with optional serverless settings (min capacity and auto pause) and configurable PITR and/or LTR retention policies. Supports optional User Assigned Identity.

## 2. Usage
```hcl
module "sql_database" {
  source = "../sql-database"

  server_id      = module.sql_server.id
  name           = "appdb"
  sku_name       = "GP_S_Gen5_2"
  min_capacity   = 0.5
  auto_pause_delay_in_minutes = 60
  collation      = "SQL_Latin1_General_CP1_CI_AS"
  zone_redundant = false

  # Backups
  pitr_days                = 7
  backup_interval_in_hours = 12
  weekly_ltr_weeks         = 16
  monthly_ltr_months       = 16
  yearly_ltr_years         = 0

  # Optional identity
  identity = {
    type         = "UserAssigned"
    identity_ids = []
  }

  tags = {
    environment = "dev"
    project     = "acme"
  }
}
```

## 3. Inputs
| Name | Type | Default | Required | Description |
|------|------|---------|:--------:|-------------|
| `server_id` | `string` | n/a | yes | Parent SQL Server ID. |
| `name` | `string` | n/a | yes | Database name. |
| `sku_name` | `string` | `"S0"` | no | SKU name (e.g., `GP_S_Gen5_2`, `S0`, `P1`). |
| `min_capacity` | `number` | `null` | no | Minimum capacity (serverless SKUs). |
| `auto_pause_delay_in_minutes` | `number` | `null` | no | Auto pause delay (serverless SKUs). |
| `collation` | `string` | `"SQL_Latin1_General_CP1_CI_AS"` | no | Database collation. |
| `zone_redundant` | `bool` | `false` | no | Zone redundancy. |
| `tags` | `map(string)` | `{}` | no | Tags to apply to resources. |
| `pitr_days` | `number` | `7` | no | PITR retention days. |
| `backup_interval_in_hours` | `number` | `0` | no | Differential backup interval (0 to omit). |
| `weekly_ltr_weeks` | `number` | `0` | no | Weekly LTR retention in weeks. |
| `monthly_ltr_months` | `number` | `0` | no | Monthly LTR retention in months. |
| `yearly_ltr_years` | `number` | `0` | no | Yearly LTR retention in years. |
| `identity` | `object({ type = string, identity_ids = optional(list(string), []) })` | `null` | no | Optional identity configuration. |

## 4. Outputs
| Name | Description |
|------|-------------|
| `id` | Resource ID of the SQL database. |
| `name` | Name of the SQL database. |
| `identity_ids` | User Assigned Identity IDs attached to the database (or null). |

## 5. Requirements
- Terraform `>= 1.12.1, < 2.0.0`
- AzureRM provider `~> 4.38`


