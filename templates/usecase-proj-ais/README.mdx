---
title: 'README'
description: 'An overview of requirements, inputs, outputs, and usage.'
icon: 'circle-info'
---

## 1. Template

Provision a simple use case with Azure AI Services (Private Endpoint + System Assigned Identity), an Azure AI Project, and an AI Services connection between them. Optional alerts and RBAC assignments for groups, managed identities, and service principals can be configured.

## 2. Usage
```hcl
module "usecase-proj-ais" {
  source = "../../../templates/usecase-proj-ais"

  providers = {
    azurerm     = azurerm
    azurerm.dns = azurerm.dns
  }

  # Context
  service_prefix = "chatbot"
  location       = "westeurope"
  environment    = "dev"
  tags           = { env = "dev", owner = "ai-platform", costcenter = "CC1234" }

  # Framework core (pre-existing)
  framework_resource_group_name = "rg-we-platform-core"
  framework_hub_name            = "aih-we-core"

  # Networking for Private Endpoints
  subnet_name              = "snet-priv-endpoints"
  vnet_name                = "vnet-hub"
  vnet_resource_group_name = "rg-we-platform-networking"
  dns_resource_group_name  = "rg-we-platform-networking"

  # AI Services
  ai_services_sku_name               = "S0"
  ai_services_model_deployment_names = ["gpt-4o-mini", "text-embedding-3-large"]

  # Alerts - AI Services (optional)
  ai_services_alert_availability_rate_enabled = false
  ai_services_alert_normalized_ttft_enabled   = false
  ai_services_alert_ttlt_enabled              = false
  ai_services_alert_processed_tokens_enabled  = false

  # Action Group (optional)
  action_group_enabled = true
  action_group_emails  = ["alerts@contoso.com", "devops@contoso.com"]

  # RBAC - AD Groups (optional)
  ad_read_group_id = null
  ad_full_group_id = null

  # RBAC - Service Principals (optional)
  sp_cicd_id = null
  sp_app_id  = null
}
```

## 3. Inputs
| Name | Type | Default | Required | Description |
|------|------|---------|:--------:|-------------|
| `environment` | `string` | n/a | yes | Environment project (dev, qua or prd). |
| `service_prefix` | `string` | n/a | yes | Prefix or name of the project. |
| `location` | `string` | n/a | yes | Azure region to deploy resources. |
| `subnet_name` | `string` | n/a | yes | Subnet name for private endpoints. |
| `vnet_name` | `string` | n/a | yes | Virtual network name containing the subnet. |
| `dns_resource_group_name` | `string` | n/a | yes | Resource group with Private DNS zone for AI Services. |
| `vnet_resource_group_name` | `string` | n/a | yes | Resource group name that contains the VNet. |
| `framework_resource_group_name` | `string` | n/a | yes | Resource group where the framework hub and resources live. |
| `framework_hub_name` | `string` | n/a | yes | Existing AI Hub (workspace) name. |
| `framework_storage_account_name` | `string` | `null` | no | Existing Storage Account name (optional, for reference). |
| `framework_ai_search_name` | `string` | `null` | no | Existing AI Search name (optional, for reference). |
| `tags` | `map(string)` | `{}` | no | Optional tags to add to resources. |
| `ad_read_group_id` | `string` | `null` | no | Object ID of the Entra ID group to grant read-level roles. |
| `ad_full_group_id` | `string` | `null` | no | Object ID of the Entra ID group to grant full-level roles. |
| `sp_cicd_id` | `string` | `null` | no | Object ID of the CI/CD service principal. |
| `sp_app_id` | `string` | `null` | no | Object ID of the application service principal. |
| `ai_services_sku_name` | `string` | `"S0"` | no | AI Services SKU. |
| `ai_services_model_deployment_names` | `list(string)` | `[]` | no | Azure OpenAI model deployment names used by AI Services alerts. |
| `ai_services_alert_availability_rate_enabled` | `bool` | `false` | no | Enable AzureOpenAIAvailabilityRate alert. |
| `ai_services_alert_normalized_ttft_enabled` | `bool` | `false` | no | Enable AzureOpenAINormalizedTTFTInMS alert. |
| `ai_services_alert_ttlt_enabled` | `bool` | `false` | no | Enable AzureOpenAITTLTInMS alert. |
| `ai_services_alert_processed_tokens_enabled` | `bool` | `false` | no | Enable ProcessedInferenceTokens alert. |
| `action_group_id` | `string` | `null` | no | Resource ID of an Azure Monitor Action Group to notify for all alerts. |
| `action_group_short_name` | `string` | `"alerts"` | no | Short name for the action group (max 12 characters). |
| `action_group_enabled` | `bool` | `true` | no | Whether the action group is enabled. |
| `action_group_email_receivers` | `map(object({ email_address = string }))` | `{}` | no | Map of email receivers for the action group. |
| `action_group_emails` | `list(string)` | `[]` | no | List of email addresses for the action group. |

## 4. Outputs
| Name | Description |
|------|-------------|
| `resource_group_name` | Name of the created resource group. |
| `resource_group_id` | ID of the created resource group. |
| `ai_services_id` | AI Services resource ID. |
| `ai_project_id` | AI Project ID. |
| `ai_services_connection_id` | AI Services connection ID (under the Project). |
| `role_assignments_groups` | Map of role assignment IDs for AD Groups. |
| `role_assignments_managed_identities` | Map of role assignment IDs for Managed Identities. |
| `role_assignments_service_principals` | Map of role assignment IDs for Service Principals. |

## 5. Requirements

- Terraform: >= 1.12.1, < 2.0.0
- Provider azurerm: ~> 4.38 (with alias `azurerm.dns` configured)
- Provider azapi: >= 2.2.0

### Used Modules

| Module | Description | Version |
| --- | --- | --- |
| `modules/region-abbreviations` | Region codes used for naming. | regabbr-v0.1.0 |
| `modules/action-group-map` | Azure Monitor Action Group via map input. | agm-v0.1.0 |
| `modules/ai-services` | Azure AI Services with MI + PE. | ais-v0.1.0 |
| `modules/ai-services-avail` | AzureOpenAIAvailabilityRate alert. | ais-avail-v0.1.0 |
| `modules/ai-services-ttft` | AzureOpenAINormalizedTTFTInMS alert. | ais-ttft-v0.1.0 |
| `modules/ai-services-ttlt` | AzureOpenAITTLTInMS alert. | ais-ttlt-v0.1.0 |
| `modules/ai-services-tok` | ProcessedInferenceTokens alert. | ais-tok-v0.1.0 |
| `modules/ai-project` | Azure AI Project (system-assigned identity). | proj-v0.1.0 |
| `modules/ai-services-hub-connection` | AI Services connection to AI Project. | aiscon-v0.1.0 |
| `modules/rbac-map` | Azure RBAC role assignments via map input. | rbacmap-v0.1.0 |


