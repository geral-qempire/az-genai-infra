---
title: 'Resource'
description: 'An overview of requirements, inputs, outputs, and usage.'
icon: 'server'
---

## 1. Module
Terraform module to create Azure Application Insights (optionally linked to a Log Analytics Workspace).

## 2. Usage
```hcl
module "region_abbreviations" {
  source = "../region-abbreviations"
}

module "application_insights" {
  source = "../application-insights/resource"

  environment          = "dev"
  service_prefix       = "acme"
  resource_group_name  = "rg-observability-dev"
  location             = "westeurope"
  region_abbreviations = module.region_abbreviations.regions

  # Optionally link to a Log Analytics workspace
  # workspace_id = module.log_analytics.log_analytics_workspace_id

  application_type           = "web"
  internet_ingestion_enabled = true
  internet_query_enabled     = true

  tags = {
    environment = "dev"
    project     = "acme"
  }
}
```

## 3. Inputs
| Name | Type | Default | Required | Description |
|------|------|---------|:--------:|-------------|
| `environment` | `string` | n/a | yes | Environment project (dev, qua or prd). |
| `service_prefix` | `string` | n/a | yes | Prefix or name of the project. |
| `location` | `string` | n/a | yes | Azure region. |
| `resource_group_name` | `string` | n/a | yes | Resource group in which to create the resource. |
| `region_abbreviations` | `map(string)` | n/a | yes | Map of Azure locations to abbreviations. |
| `workspace_id` | `string` | `""` | no | Optional Log Analytics Workspace ID to link. |
| `application_type` | `string` | `"web"` | no | Application Insights type. |
| `internet_ingestion_enabled` | `bool` | `true` | no | Enable ingestion over Internet. |
| `internet_query_enabled` | `bool` | `true` | no | Enable queries over Internet. |
| `tags` | `map(string)` | `{}` | no | Tags to apply to the resource. |

## 4. Outputs
| Name | Description |
|------|-------------|
| `application_insights_id` | Resource ID of the Application Insights resource. |
| `application_insights_name` | Name of the Application Insights resource. |
| `instrumentation_key` | Instrumentation key for classic ingestion. |
| `connection_string` | Connection string for Application Insights. |
| `application_insights_app_id` | The App ID of the Application Insights component. |
| `application_insights_workspace_id` | Linked Log Analytics Workspace ID if provided, otherwise null. |

## 5. Requirements
- Terraform `>= 1.12.1, < 2.0.0`
- AzureRM provider `~> 4.38`
- Existing Resource Group


