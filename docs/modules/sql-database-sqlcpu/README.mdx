---
title: 'README'
description: 'Quick overview of module usage, inputs, outputs and requirements.'
icon: 'circle-info'
---

## 1. Module
Azure Monitor metric alert for SQL Database SQL instance CPU percent.

- Metric: `sql_instance_cpu_percent`
- Namespace: `Microsoft.Sql/servers/databases`
- Severity: `3`

## 2. Usage
```hcl main.tf
module "sql_db_sql_instance_cpu_alert" {
  source = "../sql-database-sqlcpu"

  # Defaults name to alrt-sqlcpu-<db-name>
  # name = "alrt-sqlcpu-appdb"

  resource_group_name = "rg-observability"
  scopes              = [module.sql_database.id]

  # Threshold in percent (fires when above)
  threshold = 70

  # Optional
  description   = "SQL instance CPU percent above 70% over 15 minutes"
  enabled       = true
  auto_mitigate = true
  action_group_ids = []

  tags = {
    environment = "dev"
    project     = "acme"
  }
}
```

## 3. Inputs
| Name | Type | Default | Required | Description |
|------|------|---------|:--------:|-------------|
| `name` | `string` | `null` | no | Name of the metric alert (defaults to `alrt-sqlcpu-<resource-name>`). |
| `resource_group_name` | `string` | n/a | yes | Resource group in which to create the alert. |
| `scopes` | `list(string)` | n/a | yes | List of SQL Database resource IDs to monitor. |
| `threshold` | `number` | `70` | no | CPU percent threshold. Fires when above this value. |
| `description` | `string` | `null` | no | Custom description for the alert. Auto-generated if not provided. |
| `enabled` | `bool` | `true` | no | Whether the alert is enabled. |
| `auto_mitigate` | `bool` | `true` | no | Whether the alert should auto mitigate when conditions clear. |
| `action_group_ids` | `list(string)` | `[]` | no | Action Group IDs to notify when the alert fires. |
| `tags` | `map(string)` | `{}` | no | Tags to apply to the metric alert resource. |

## 4. Outputs
| Name | Description |
|------|-------------|
| `id` | Resource ID of the metric alert. |
| `name` | Name of the metric alert. |

## 5. Requirements
- Terraform `>= 1.12.1, < 2.0.0`
- AzureRM provider `~> 4.38`
- An existing Azure Resource Group
- An existing SQL Database


